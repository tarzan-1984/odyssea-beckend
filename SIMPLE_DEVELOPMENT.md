# üöÄ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Migrations

## üéØ –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ï—Å–ª–∏ –≤—ã —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –±–µ–∑ migrations.

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –Ω–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –æ –º–∏–≥—Ä–∞—Ü–∏—è—Ö
- **–ë—ã—Å—Ç—Ä–æ—Ç–∞** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É
- **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ —Å—Ö–µ–º–æ–π
- **–ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤** - –Ω–µ—Ç –ø–∞–ø–∫–∏ migrations

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –∫ –ë–î
yarn prisma:migrate

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
yarn db:push
```

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–±—Ä–æ—Å–∏—Ç—å –ë–î (—É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
yarn db:reset

# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç
yarn prisma:generate

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
yarn prisma:studio
```

## üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### 1. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
```prisma
// prisma/schema.prisma
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  username  String   @unique
  password  String
  phone     String?  // ‚Üê –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤–æ–µ –ø–æ–ª–µ
  role      UserRole @default(USER)
  status    Status   @default(ACTIVE)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
```bash
yarn prisma:migrate
# –∏–ª–∏
yarn db:push
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç
```bash
yarn prisma:generate
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
```bash
yarn prisma:studio
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –î–µ–π—Å—Ç–≤–∏–µ | –° Migrations | –ë–µ–∑ Migrations |
|----------|--------------|----------------|
| –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É | `yarn prisma:migrate` | `yarn db:push` |
| –°–±—Ä–æ—Å–∏—Ç—å –ë–î | `yarn db:reset` | `yarn db:reset` |
| –ü—Ä–æ–¥–∞–∫—à–µ–Ω | `yarn prisma:migrate:deploy` | `yarn db:push` |
| –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π | ‚úÖ –ï—Å—Ç—å | ‚ùå –ù–µ—Ç |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ | ‚ùå –°–ª–æ–∂–Ω–µ–µ | ‚úÖ –ü—Ä–æ—â–µ |

## üö® –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ migrations:
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î
- ‚ùå –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ –∫–æ–º–∞–Ω–¥–µ
- ‚ùå –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –ö–æ–≥–¥–∞ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ migrations:
- ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è
- ‚úÖ –ï—Å—Ç—å –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ
- ‚úÖ –ì–æ—Ç–æ–≤–∏—Ç–µ—Å—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

## üîÑ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ migrations

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –±–æ–ª–µ–µ —Å–µ—Ä—å–µ–∑–Ω–æ–º—É –ø–æ–¥—Ö–æ–¥—É:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
yarn prisma:migrate dev --name init

# 2. –í–µ—Ä–Ω—É—Ç—å –∫–æ–º–∞–Ω–¥—É migrate
# –í package.json –∑–∞–º–µ–Ω–∏—Ç—å:
# "prisma:migrate": "prisma db push"
# –Ω–∞:
# "prisma:migrate": "prisma migrate dev"
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ db:push
yarn db:push

# –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–æ —Å—Ö–µ–º–æ–π
# –ù–µ –±–µ—Å–ø–æ–∫–æ–π—Ç–µ—Å—å –æ –º–∏–≥—Ä–∞—Ü–∏—è—Ö
```

### –ö–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –ø–æ–¥—Ä–∞—Å—Ç–µ—Ç:
```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ migrations
yarn prisma:migrate dev --name init
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ë–î
curl http://localhost:3000/api/v1/db-health

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
yarn prisma:studio

# –°–±—Ä–æ—Å–∏—Ç—å –ë–î
yarn db:reset

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
yarn db:push
```

---

**–í—ã–≤–æ–¥:** –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç! üéâ
